<div class="container">
  <div class="text-center mt-5">
    <h1>{{ ticketData ? 'Update Ticket' : 'Raise a New Ticket' }}</h1>
  </div>

  <div class="row">
    <div class="col-lg-7 mx-auto">
      <div class="card mt-2 mx-auto p-4 bg-light">
        <div class="card-body bg-light">
          <div class="container">
            <form
              [formGroup]="ticketFields"
              (ngSubmit)="handleSaveTicket()"
              id="contact-form"
              role="form"
            >
              <div class="controls">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="form_customer">Customer *</label>
                      <input
                        id="form_customer"
                        type="text"
                        formControlName="customer"
                        class="form-control"
                        placeholder="Please enter customer*"
                        required
                      />
                      <label
                        *ngIf="
                          ticketFields.get('customer')?.invalid &&
                          ticketFields.get('customer')?.touched
                        "
                        style="color: red"
                        class="form-label"
                      >
                        Customer is required.
                      </label>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="form_branch">Branch *</label>
                      <input
                        id="form_branch"
                        type="text"
                        formControlName="branch"
                        class="form-control"
                        placeholder="Please enter your branch *"
                        required
                      />
                      <label
                        *ngIf="
                          ticketFields.get('branch')?.invalid &&
                          ticketFields.get('branch')?.touched
                        "
                        style="color: red"
                        class="form-label"
                      >
                        Branch is required.
                      </label>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="form_ticketDesc">Ticket Title *</label>
                      <input
                        id="form_ticketDesc"
                        type="text"
                        formControlName="ticketDesc"
                        class="form-control"
                        placeholder="Please enter your ticket title *"
                        required
                      />
                      <label
                        *ngIf="
                          ticketFields.get('ticketDesc')?.invalid &&
                          ticketFields.get('ticketDesc')?.touched
                        "
                        style="color: red"
                        class="form-label"
                      >
                        Ticket Title is required.
                      </label>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="form_ticketPriority">Select Category *</label>
                      <select
                        id="form_ticketPriority"
                        formControlName="ticketPriority"
                        class="form-control"
                        required
                      >
                        <option value="" disabled selected>
                          -- Select Your Priority --
                        </option>
                        <option>Very High</option>
                        <option>High</option>
                        <option>Medium</option>
                        <option>Low</option>
                      </select>
                      <label
                        *ngIf="
                          ticketFields.get('ticketPriority')?.invalid &&
                          ticketFields.get('ticketPriority')?.touched
                        "
                        style="color: red"
                        class="form-label"
                      >
                        Category is required.
                      </label>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="form_assignee">Assignee *</label>
                      <input
                        id="form_assignee"
                        type="text"
                        formControlName="assignee"
                        class="form-control"
                        placeholder="Please enter assignee *"
                        required
                      />
                      <label
                        *ngIf="
                          ticketFields.get('assignee')?.invalid &&
                          ticketFields.get('assignee')?.touched
                        "
                        style="color: red"
                        class="form-label"
                      >
                        Assignee is required.
                      </label>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="form_status">Select Status *</label>
                      <select
                        id="form_status"
                        formControlName="status"
                        class="form-control"
                        required
                      >
                        <option value="" disabled selected>
                          -- Select Your Status --
                        </option>
                        <option>Todo</option>
                        <option>In Progress</option>
                        <option>Resolved</option>
                        <option>Reopened</option>
                      </select>
                      <label
                        *ngIf="
                          ticketFields.get('status')?.invalid &&
                          ticketFields.get('status')?.touched
                        "
                        style="color: red"
                        class="form-label"
                      >
                        Status is required.
                      </label>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label for="form_description"
                        >Description of Ticket *</label
                      >
                      <textarea
                        id="form_description"
                        formControlName="description"
                        class="form-control"
                        placeholder="Write your message here."
                        rows="4"
                        required
                      ></textarea>
                      <label
                        *ngIf="
                          ticketFields.get('description')?.invalid &&
                          ticketFields.get('description')?.touched
                        "
                        style="color: red"
                        class="form-label"
                      >
                        Description is required.
                      </label>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <input
                      [disabled]="ticketFields.invalid"
                      type="submit"
                      class="btn btn-success btn-send pt-2 btn-block"
                      value="Submit"
                    />
                  </div>
                  <div *ngIf="!ticketData" class="col-md-6">
                    <input (click)="resetForm()"
                      type="submit"
                      class="btn btn-danger btn-send pt-2 btn-block"
                      value="Reset"
                    />
                  </div>
                  <div *ngIf="ticketData" class="col-md-6">
                    <input (click)="handleDeleteTicket()"
                      type="submit"
                      class="btn btn-danger btn-send pt-2 btn-block"
                      value="Delete"
                    />
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
